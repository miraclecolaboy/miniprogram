/* pages/checkout/checkout.wxss */
page {
  /* --- 核心变量 --- */
  --bg-page: #F7F8FA;
  --bg-card: #FFFFFF;
  
  --text-main: #1D1D1F;      
  --text-sub: #86909C;       
  --text-price: #1D1D1F;     
  
  --gold: #CFAA5E;           /* 主题金（黑金风格核心） */
  --gold-dark: #967B40;
  --black-card: #141414;     

  /* 阴影系统 */
  --shadow-card: 0 8rpx 24rpx rgba(0, 0, 0, 0.04);
  --shadow-float: 0 16rpx 48rpx rgba(0, 0, 0, 0.06);
  --shadow-bar: 0 -10rpx 40rpx rgba(0,0,0,0.05);

  background-color: var(--bg-page);
  font-family: -apple-system, BlinkMacSystemFont, Helvetica, sans-serif;
  color: var(--text-main);
  padding-bottom: calc(140rpx + env(safe-area-inset-bottom));
  box-sizing: border-box;
}

.page {
  height: 100vh;
  padding: 16rpx;
  box-sizing: border-box;
  overflow: hidden; /* Use inner scroll-view to avoid page scrollbar. */
  display: flex;
  flex-direction: column;
}

.page-scroll {
  flex: 1;
  min-height: 0;
  height: 100%;
}

.page-scroll-spacer {
  height: calc(160rpx + env(safe-area-inset-bottom));
}

/* --- 通用组件 --- */
.arrow { color: #C5C6CB; font-size: 24rpx; margin-left: 8rpx; font-family: monospace; }
.hover-opacity { opacity: 0.6; }

/* 通用卡片 */
.card {
  background: var(--bg-card); border-radius: 24rpx; padding: 24rpx 30rpx; margin-bottom: 16rpx;
  border: 1rpx solid #F2F2F2; box-shadow: 0 14rpx 48rpx rgba(0,0,0,0.035); position: relative; overflow: hidden;
}
.card-title { font-size: 28rpx; font-weight: 700; margin-bottom: 24rpx; color: var(--text-main); letter-spacing: 1rpx; }

/* --- 单元格 --- */
.cell-row { display: flex; justify-content: space-between; align-items: center; padding: 26rpx 0; border-bottom: 1rpx solid #F2F3F5; }
.cell-row:first-child { padding-top: 0; }
.cell-row:last-child { padding-bottom: 0; border-bottom: none; }
.cell-label { font-size: 28rpx; font-weight: 500; }
.cell-right { font-size: 28rpx; color: var(--text-sub); display: flex; align-items: center; min-width: 0; }
.highlight-gold { color: var(--gold) !important; font-weight: 600; }
.vip-tag { background: #BFA15F; color: #000; font-size: 20rpx; padding: 2rpx 8rpx; border-radius: 4rpx; font-weight: 800; margin-left: 12rpx; margin-right: 0; vertical-align: middle; }

/* --- 支付方式 & 备注 --- */
.pay-option { display: flex; justify-content: space-between; align-items: center; padding: 24rpx 0; }
.pay-left { display: flex; align-items: center; }
.pay-icon-img { width: 40rpx; height: 40rpx; margin-right: 20rpx; }
.pay-text-group { display: flex; flex-direction: column; }
.pay-main-text { font-size: 28rpx; font-weight: 500; }
.pay-sub-text { font-size: 22rpx; color: var(--text-sub); }
.radio-circle { width: 36rpx; height: 36rpx; border: 2rpx solid #E5E6EB; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
.radio-circle.checked { border-color: var(--text-main); background: var(--text-main); }
.radio-dot { width: 14rpx; height: 14rpx; background: #fff; border-radius: 50%; }
.remark-input { flex: 1; text-align: right; font-size: 28rpx; color: var(--text-main); }
.ph-color { color: #C5C6CB; }

/* --- 底部结算栏 --- */
.bottom-bar {
  position: fixed; left: 0; right: 0; bottom: 0; background: #FFFFFF; box-shadow: var(--shadow-bar); height: 124rpx; 
  display: flex; align-items: center; justify-content: space-between; padding: 0 24rpx; padding-bottom: env(safe-area-inset-bottom); z-index: 100;
}
.bar-left { display: flex; flex-direction: column; }
.price-box { display: flex; align-items: baseline; color: var(--text-main); }
.currency { font-size: 28rpx; font-weight: 600; margin-right: 4rpx; }
.total-num { font-size: 44rpx; font-weight: 800; font-family: 'DIN Alternate', sans-serif; }
.discount-tip { font-size: 22rpx; color: var(--text-sub); margin-top: 4rpx; }
.pay-btn {
  background: var(--text-main); color: #FFFFFF; font-size: 30rpx; font-weight: 600; height: 80rpx; line-height: 80rpx; padding: 0 56rpx; border-radius: 999rpx; box-shadow: 0 10rpx 24rpx rgba(0, 0, 0, 0.15); transition: transform 0.1s;
}
.pay-btn:active { transform: scale(0.98); }

/* Header Section (保持) */
.header-section { padding: 10rpx 14rpx 10rpx; margin-bottom: 16rpx; position: relative; display: flex; flex-direction: column; }

/* 右上角：模式提示 + 堂食/自提切换 */
.top-right-mode {
  position: absolute;
  right: 24rpx;
  top: 24rpx;
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 12rpx;
}
.mode-badge {
  display: flex;
  align-items: center;
  /* Match "到店模式" active pill style */
  padding: 14rpx 32rpx;
  background: #FFFFFF;
  border-radius: 999rpx;
  border: none;
  box-shadow: 0 10rpx 28rpx rgba(0,0,0,0.06);
}
.mode-icon { width: 32rpx; height: 32rpx; margin-right: 10rpx; opacity: 1; }
.mode-text { font-size: 28rpx; font-weight: 700; color: var(--text-main); letter-spacing: 0; }
.mode-badge--waimai, .mode-badge--kuaidi { background: #FFFFFF; }
.submode-tabs { display: flex; background: #F1F2F4; border-radius: 999rpx; padding: 8rpx; width: fit-content; }
.submode-tab { display: flex; align-items: center; padding: 14rpx 32rpx; font-size: 28rpx; color: #666; border-radius: 999rpx; transition: all 0.2s; }
.submode-icon { width: 32rpx; height: 32rpx; margin-right: 10rpx; opacity: 0.55; }
.submode-tab.active { background: #FFFFFF; color: var(--text-main); font-weight: 700; box-shadow: 0 10rpx 28rpx rgba(0,0,0,0.06); }
.submode-tab.active .submode-icon { opacity: 1; }
.main-info-box { margin-bottom: 10rpx; padding-left: 20rpx; padding-right: 300rpx; padding-top: 0; }
.main-info-box--delivery { padding-right: 260rpx; }
@keyframes storeNameIn { from { opacity: 0; transform: translateY(10rpx); } to { opacity: 1; transform: translateY(0); } }
.store-name { font-size: 40rpx; font-weight: 800; color: var(--text-main); display: block; margin-bottom: 12rpx; line-height: 1.3; letter-spacing: 2rpx; opacity: 0; transform: translateY(10rpx); will-change: opacity, transform; }
.store-name--in { opacity: 1; transform: translateY(0); animation: storeNameIn 0.35s ease-out both; }
.addr-detail { font-size: 30rpx; font-weight: 700; color: var(--text-main); display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; overflow: hidden; margin-bottom: 12rpx; line-height: 1.4; }
.distance-tag, .user-detail { font-size: 24rpx; color: var(--text-sub); }
.pickup-time-row { display: flex; align-items: center; margin-top: 24rpx; font-size: 28rpx; }
.pickup-time-row .label { color: var(--text-sub); margin-right: 20rpx; }
.pickup-time-row .time-val { font-weight: 600; color: var(--text-main); display: flex; align-items: center; }
.address-info { position: relative; padding-right: 40rpx; }
.addr-placeholder { font-size: 32rpx; font-weight: 700; color: var(--text-main); }
.arrow-right { position: absolute; right: 0; top: 50%; transform: translateY(-50%); color: #ccc; }
.product-item { display: flex; margin-bottom: 30rpx; }
.p-img { width: 130rpx; height: 130rpx; border-radius: 16rpx; background: #eee; box-shadow: 0 10rpx 24rpx rgba(0, 0, 0, 0.06); margin-right: 24rpx; flex-shrink: 0; }
.p-content { flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding: 4rpx 0; }
.p-row-top, .p-row-bottom { display: flex; justify-content: space-between; align-items: flex-start; }
.p-name { font-size: 28rpx; font-weight: 600; color: var(--text-main); width: 70%; line-height: 1.4; }
.p-price { font-size: 30rpx; font-weight: 700; color: var(--text-price); }
.p-spec, .p-count { font-size: 24rpx; color: var(--text-sub); }
.fee-row { display: flex; justify-content: space-between; padding-top: 24rpx; border-top: 1rpx solid #F2F3F5; font-size: 28rpx; color: var(--text-main); font-weight: 500; }
.fee-tip { font-size: 24rpx; color: #CFAA5E; text-align: right; margin-top: 10rpx; font-weight: 500; }
@keyframes shimmer { 0% { background-position: 120% 0; } 30% { background-position: -20% 0; } 100% { background-position: -20% 0; } }
.shimmer-anim { background: linear-gradient(110deg, var(--gold-dark) 40%, #FFFFFF 50%, var(--gold-dark) 60%); background-size: 200% 100%; -webkit-background-clip: text; background-clip: text; color: transparent; animation: shimmer 5s infinite linear; display: inline-block; transform: translateZ(0); }


/* =================================================================
   新版优惠券弹窗（Black Gold Ticket - Final Polish）
   ================================================================= */

/* 1. 弹窗容器 */
.coupon-mask {
  position: fixed; inset: 0; background-color: rgba(0,0,0,0.5); z-index: 900; animation: couponFadeIn 0.18s ease-out;
}
.coupon-sheet {
  position: fixed; left: 0; right: 0; bottom: 0; z-index: 901;
  background: #F8F8F8; /* 弹窗背景 */
  border-top-left-radius: 32rpx; border-top-right-radius: 32rpx;
  box-shadow: 0 -16rpx 48rpx rgba(0,0,0,0.08);
  padding: 14rpx 24rpx calc(24rpx + env(safe-area-inset-bottom));
  box-sizing: border-box;
  max-height: 70vh;
  display: flex; flex-direction: column;
  animation: couponSheetUp 0.22s ease-out;
}

/* 2. 头部 */
.coupon-handle-bar { height: 34rpx; display: flex; justify-content: center; align-items: center; }
.coupon-handle { width: 84rpx; height: 8rpx; border-radius: 999rpx; background: #E0E0E0; }

.coupon-header { display: flex; justify-content: space-between; align-items: center; padding: 12rpx 10rpx 24rpx; }
.coupon-sheet-title { font-size: 34rpx; font-weight: 800; color: #1A1A1A; }
/* 极简叉号 */
.coupon-close { font-size: 44rpx; color: #999; font-weight: 300; line-height: 1; padding: 10rpx; }

.coupon-list { flex: 1; padding-top: 10rpx; overflow-y: auto; }
.coupon-list::-webkit-scrollbar { display: none; width: 0; height: 0; color: transparent; }

/* 3. 卡片容器 */
.coupon-option {
  position: relative;
  display: flex;
  height: 200rpx; /* 大气的高度，增加呼吸感 */
  background: #FFFFFF;
  border-radius: 20rpx;
  margin-bottom: 24rpx;
  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.02); /* 默认极淡阴影 */
  border: 2rpx solid transparent; 
  transition: all 0.2s;
  overflow: hidden;
}
/* 选中态：金色边框 + 柔和金光 */
.coupon-option.active {
  border-color: var(--gold);
  box-shadow: 0 8rpx 24rpx rgba(207, 161, 94, 0.12);
}

/* "不使用优惠券" 特殊样式 */
.coupon-none { align-items: center; justify-content: space-between; height: 110rpx; padding: 0 30rpx; }
.coupon-none-text { font-size: 28rpx; font-weight: 600; color: #333; }

/* 4. 左侧：金额区 */
.coupon-left {
  width: 170rpx; /* 稍微加宽 */
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  color: var(--gold);
  flex-shrink: 0;
}
.price-group { display: flex; align-items: baseline; line-height: 1; margin-bottom: 14rpx; }
.symbol { font-size: 28rpx; font-weight: 600; margin-right: 4rpx; }
.amount { font-size: 64rpx; font-weight: 900; letter-spacing: -2rpx; } /* 数字更大 */
.condition { font-size: 22rpx; color: #999; font-weight: 500; }

/* 5. 分割线与缺口 (核心修复) */
.split-line-box {
  width: 2rpx;
  position: relative;
  height: 100%;
  display: flex; align-items: center; justify-content: center;
}
.split-dash {
  width: 0; height: 70%; 
  border-left: 2rpx dashed #EEEEEE; /* 虚线更淡 */
}
/* 使用绝对定位制作缺口，保证50%切入 */
.circle-top, .circle-bottom {
  position: absolute; left: 50%;
  width: 32rpx; height: 32rpx; /* 更大的缺口 */
  background-color: #F8F8F8; /* 同弹窗背景 */
  border-radius: 50%;
  transform: translateX(-50%); /* 水平居中 */
  box-shadow: inset 0 2rpx 4rpx rgba(0,0,0,0.03);
  z-index: 2;
}
.circle-top { top: -16rpx; } /* 向上偏移半径的一半 */
.circle-bottom { bottom: -16rpx; } /* 向下偏移半径的一半 */

/* 6. 右侧：详情 */
.coupon-right {
  flex: 1; padding: 0 24rpx 0 32rpx;
  display: flex; flex-direction: column; justify-content: center;
  min-width: 0;
}
.info-top { display: flex; align-items: center; margin-bottom: 16rpx; }
.c-title { font-size: 30rpx; font-weight: 700; color: #1A1A1A; margin-right: 12rpx; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.c-count {
  font-size: 20rpx; font-weight: 600; color: #666;
  background: #F2F2F2; padding: 4rpx 12rpx; border-radius: 8rpx;
}
.c-tag {
  font-size: 22rpx; color: #999; 
  border: 1rpx solid #EAEAEA; padding: 4rpx 12rpx; border-radius: 6rpx;
  width: fit-content;
}

/* 7. 单选框容器 */
.radio-box {
  display: flex; align-items: center; padding-right: 30rpx;
}
.coupon-radio {
  width: 38rpx; height: 38rpx;
  border: 3rpx solid #DCDCDC;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.coupon-radio.checked { border-color: var(--gold); background: var(--gold); }
.coupon-radio-dot { width: 14rpx; height: 14rpx; border-radius: 50%; background: #fff; }

/* 动画定义 */
@keyframes couponFadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes couponSheetUp { from { transform: translateY(30rpx); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* 结算页预览 */
.coupon-cell { display: flex; align-items: center; min-width: 0; max-width: 520rpx; }
.coupon-cell-title { font-size: 26rpx; color: var(--text-sub); max-width: 360rpx; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.coupon-cell-discount { margin-left: 12rpx; font-size: 28rpx; font-weight: 700; color: var(--gold); flex-shrink: 0; }
.coupon-cell-placeholder { color: var(--text-sub); }
