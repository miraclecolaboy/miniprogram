<view class="page">

<!-- 不同等级会员卡片：左右滑动 -->
<swiper
  class="vip-swiper"
  current="{{currentIndex}}"
  bindchange="onSwiperChange"
  previous-margin="56rpx"
  next-margin="56rpx"
  style="height: {{vipCardHeight}}px;"
>
  <swiper-item wx:for="{{levelCards}}" wx:key="level">
    <view class="vip-swiper-item">
      <view
        class="card vip-card {{memberLevel >= item.level ? 'unlocked' : 'locked'}} {{index === currentIndex ? 'active' : ''}}"
        style="height: {{vipCardHeight}}px;"
        data-index="{{index}}"
        bindtap="onTapCard"
      >
        <!-- 半圆形背景装饰 -->
        <view class="vip-bg">
          <view class="vip-circle c1"></view>
          <view class="vip-circle c2"></view>
        </view>

        <!-- 顶部信息 -->
        <view class="vip-header">
          <view class="vip-status">{{item.level === 0 ? '普通会员' : '等级会员'}}</view>
          <view class="vip-entry">
            <text class="vip-lv">Lv{{item.level}}</text>
          </view>
        </view>

        <!-- 底部信息 -->
        <view class="vip-footer">
          <view class="vip-benefit">{{item.brief}}</view>
          <view class="vip-expire">{{item.hint}}</view>
        </view>
      </view>
    </view>
  </swiper-item>
</swiper>

<!-- 权益详情 + 经验条（信息集中，减少碎片化卡片） -->
<view class="card detail-card">
  <view class="detail-header">
    <view class="detail-title">{{currentCard.title}}</view>
    <view class="detail-pill {{memberLevel >= currentCard.level ? 'pill-on' : 'pill-off'}}">
      <text wx:if="{{memberLevel >= currentCard.level}}">已解锁</text>
      <text wx:else>解锁需 ￥{{currentCard.thresholdText}}</text>
    </view>
  </view>

  <view class="detail-exp">
    <view class="exp-bar">
      <view class="exp-bar-inner" style="width: {{expPercent}}%;"></view>
    </view>
    <view class="exp-row">
      <text class="exp-text">{{expText}}</text>
      <text class="exp-sub">{{expSub}}</text>
    </view>
  </view>

  <view class="benefits">
    <view class="benefit-row" wx:for="{{currentCard.benefits}}" wx:key="*this">
      <view class="dot"></view>
      <text class="benefit-txt">{{item}}</text>
    </view>
  </view>
</view>

<!-- 底部操作 -->
<view class="footer">
  <view class="primary-btn" bindtap="onTapRecharge">
    去充值
  </view>
</view>

</view>
